/* Main.css */
:root {
    --bg: #f6f6f6;
    --ink: #3897f0;
    --muted: #6b7280;
    --line: #ececec;
    --panel: #fff;
    --soft: #f3f4f6;
}

* {
    box-sizing: border-box;
}

html, body, #root {
    height: 100%;
    margin: 0;
}

body {
    background: var(--bg);
    color: var(--ink);
    font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif; /* 기존 글꼴 그대로 유지 */
    overflow: hidden; /* 오버플로우 비활성화 */
}

/* App Layout */
.app {
    display: flex;
    height: 100vh;
    width: 100vw;
    overflow: hidden; /* 전체 오버플로우 제거 */
}

.sidebar {
    width: 360px;        /* 고정 폭 */
    flex: 0 0 360px;     /* 고정 크기 */
    height: 100%;
    background: var(--panel);
    border-right: 1px solid var(--line);
    display: flex;
    flex-direction: column;
    overflow: hidden;     /* 사이드바에서 오버플로우 비활성화 */
}

.map-area {
    position: relative;
    flex: 1 1 auto;       /* 남는 공간 채우기 */
    height: 100%;
    overflow: hidden;     /* 지도 영역에서 오버플로우 비활성화 */
}

.map-canvas {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    background: #dfe7ef; /* 지도 로딩 전 배경색 */
    overflow: hidden;     /* 지도 캔버스에서 오버플로우 비활성화 */
}

/* Brand */
.brand-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 14px 16px;
    border-bottom: 1px solid #efefef;
}

.brand {
    font-size: 33px;
    font-family: 'Great Vibes', cursive;
    color: #000;
    letter-spacing: -.2px;
}

.sidebar .brand-row .brand {
    font-size: 50px;   /* 원하는 크기 */
    font-weight: 100;
    line-height: 1;
}

.mobile-header .brand-row .brand {
    font-size: 50px;   /* 원하는 크기 */
    font-weight: 100;
    line-height: 1;
}

.pill {
    font-size: 11px;
    color: var(--muted);
    background: var(--soft);
    padding: 2px 6px;
    border-radius: 999px;
}

/* Tabs */
.tabs {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 6px;
    padding: 8px;
    border-bottom: 1px solid #efefef;
    overflow: hidden; /* 탭 영역에서 오버플로우 비활성화 */
}

.tab {
    padding: 10px 8px;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
    background: var(--soft);
    border: 1px solid #eee;
    cursor: pointer;
}

.tab.active {
    background: var(--ink);
    color: #fff;
    border-color: var(--ink);
    box-shadow: 0 2px 8px rgba(0, 0, 0, .12);
}

/* Panels */
.panel-wrap {
    padding: 16px;
    overflow: auto;
    flex: 1;
    overflow-x: hidden; /* 가로 스크롤 비활성화 */
    overflow-y: auto;   /* 세로 스크롤 허용 */
}

.section-title {
    font-size: 14px;
    font-weight: 700;
    color: #374151;
    margin-bottom: 6px;
}

/* Inputs & Buttons */
.input-wrap {
    display: flex;
    align-items: center;
    background: var(--soft);
    border-radius: 16px;
    padding: 10px 12px;
    border: 1px solid var(--line);
}

.input {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    font-size: 15px;
}

.swap-btn {
    border: 1px solid #eee;
    background: #fff;
    border-radius: 20px;
    padding: 6px 12px;
    font-size: 12px;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0, 0, 0, .06);
}

.primary-btn {
    background: var(--ink);
    color: #fff;
    border: 1px solid var(--ink);
    padding: 12px 16px;
    border-radius: 14px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 0, 0, .15);
}

.primary-btn-center {
    background: var(--ink);
    color: #fff;
    border: 1px solid var(--ink);
    margin: 12px auto;
    width: 100%;
    padding: 12px 16px;
    border-radius: 14px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 0, 0, .15);
}

.ghost-btn {
    background: var(--soft);
    color: #374151;
    border: 1px solid var(--line);
    padding: 12px 14px;
    border-radius: 14px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
}

/* Cards & Stats */
.card {
    background: #fff;
    border: 1px solid #efefef;
    border-radius: 14px;
    padding: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, .04);
}

.subtle {
    font-size: 12px;
    color: var(--muted);
}

.stat-card {
    background: #fff;
    border: 1px solid #efefef;
    border-radius: 14px;
    padding: 12px;
    text-align: center;
    box-shadow: 0 1px 3px rgba(0, 0, 0, .04);
}

/* List */
.list {
    margin: 0;
    padding: 0;
    list-style: none;
    border: 1px solid #efefef;
    border-radius: 12px;
    overflow: hidden;
    background: #fff;
    box-shadow: 0 1px 3px rgba(0, 0, 0, .04);
}

.list-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    border-top: 1px solid #f5f5f5;
}

.small-btn {
    border: 1px solid #eaeaea;
    background: #f8f8f8;
    border-radius: 8px;
    padding: 6px 8px;
    font-size: 12px;
    cursor: pointer;
}

/* Footer */
.footer {
    font-size: 12px;
    color: var(--muted);
    border-top: 1px solid #efefef;
    padding: 12px;
}

/* Header Links */
.header-links {
    position: absolute;
    right: 12px;
    top: 12px;
    display: flex;
    gap: 8px;
    z-index: 5;
    overflow: hidden; /* 링크가 부모를 벗어나지 않도록 */
}

.link-btn {
    text-decoration: none;
    color: #374151;
    background: rgba(255, 255, 255, .96);
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 8px 12px;
    font-size: 14px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, .08);
}

/* Utilities */
.mt-12 {
    margin-top: 12px;
}

.grid-3 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
}

.tip-box {
    background: var(--soft);
    color: #4b5563;
    border-radius: 12px;
    padding: 12px;
    font-size: 12px;
}


/* 로고가 서서히 사라지는 애니메이션 */
@keyframes fadeUp {
    0% {
        opacity: 1;
        transform: translateY(0);
    }
    100% {
        opacity: 0;
        transform: translateY(-50px); /* 위로 50px 이동 */
    }
}

/* 애니메이션을 적용하는 클래스 */
.fade-up {
    animation: fadeUp 0.5s ease-out forwards;  /* 0.5초 동안 애니메이션 실행 */
}

/* 로딩 중에 빙글빙글 도는 원 애니메이션 */
@keyframes spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

/* 로딩 원 스타일 */
.loading-circle {
    width: 40px;
    height: 40px;
    border: 3px solid #ccc;
    border-top: 3px solid #3498db; /* 파란색 테두리 */
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

/* 안심주행 텍스트 스타일 */
.safe-driving-text {
    margin-left: 10px;
    font-weight: 600;
    color: #3498db;
    font-size: 20px;
}
/* 부드럽게 사라지는 효과 */
.fade-out {
    animation: fadeOut 0.5s ease-in-out forwards;
}

.fade-in {
    animation: fadeIn 0.5s ease-in-out forwards;
}

@keyframes fadeOut {
    0% {
        opacity: 1;
    }
    100% {
        opacity: 0;
        display: none;
    }
}

@keyframes fadeIn {
    0% {
        opacity: 0;
        display: block;
    }
    100% {
        opacity: 1;
    }
}

/* filter */
.filter-overlay {
    position: absolute;
    width:250px;
    height:300px;
    top: 5px; /* 로그인/관리자 버튼 바로 아래 */
    left: 5px;
    background-color: white;
    border: 1px solid #ccc;
    border-radius: 6px;
    padding: 8px 12px;
    z-index: 1000;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    display: flex;
    flex-direction: column;
    gap: 6px;
    font-size: 14px;
}

.filter-overlay label {
    display: flex;
    align-items: center;
    gap: 6px;
}

/*info window*/
.my-infowindow {
    width: 250px;        /* 너비 조절 */
    padding: 10px;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    font-size: 14px;
    color: #333;
}

.my-infowindow h4 {
    margin: 0 0 6px 0;
    font-size: 16px;
    color: #0078ff;
}

.my-infowindow p {
    margin: 2px 0;
}
/* ===== Eazypark custom marker overlay ===== */
.ep-overlay{
    min-width: 230px;
    background: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 14px;
    box-shadow: 0 12px 28px rgba(0,0,0,.18);
    overflow: hidden;
    font-size: 12px;
    color: #111827;
}

.ep-overlay__head{
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 8px 10px;
    background: linear-gradient(135deg, #3897f0, #60a5fa);
    color: #fff;
}

.ep-overlay__title{
    font-weight: 800;
    font-size: 14px;
    letter-spacing: -.2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;
}

.ep-overlay__badge{
    font-size: 11px;
    background: rgba(255,255,255,.22);
    padding: 2px 8px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.4);
}

.ep-overlay__body{
    padding: 8px 10px;
}

.ep-row{
    display: grid;
    grid-template-columns: 72px 1fr;
    gap: 10px;
    align-items: center;
}

.ep-row + .ep-row{ margin-top: 6px; }
.ep-row span{ color: #6b7280; font-size: 12px; }
.ep-row b{ font-weight: 700; }

.ep-kv{
    display: grid;
    grid-template-columns: 48px 1fr 48px 1fr 48px 1fr;
    gap: 8px;
    align-items: center;
    padding-bottom: 6px;
    margin-bottom: 8px;
    border-bottom: 1px dashed #e5e7eb;
}

.ep-kv span{ color:#6b7280; font-size:12px; }
.ep-kv b{ font-weight:800; }

.ep-overlay__actions{
    padding: 10px 12px;
    background: #f9fafb;
    display: flex;
    justify-content: flex-end;
}

.ep-overlay__btn{
    text-decoration: none;
    color: #fff;
    background: var(--ink);
    border: 1px solid var(--ink);
    padding: 6px 10px;
    border-radius: 10px;
    font-weight: 700;
    font-size: 13px;
    box-shadow: 0 4px 12px rgba(0,0,0,.15);
}

.ep-overlay__btn:hover{ filter: brightness(1.05); }

/* 닫기(X) 버튼 */
.ep-overlay__head { position: relative; }
.ep-close{
    right: 8px;
    top: 8px;
    height: 24px;
    border: 0;
    border-radius: 6px;
    background: transparent;
    color: #fff;
    font-weight: 800;
    line-height: 1;
    cursor: pointer;
    position: static;      /* grid 자리에 배치 */
    width: 20px; height: 20px;
    font-size: 16px; line-height: 1;
    justify-self: end;     /* 오른쪽 정렬 */
}

.ep-close:hover{ background: rgba(255,255,255,.18); }

/* ===== Drive mode UI ===== */
.ep-drive-card{
    background:#fff;
    border:1px solid #e8eaf0;
    border-radius:16px;
    padding:12px;
    box-shadow:0 6px 18px rgba(0,0,0,.06);
    margin-top:12px;
}
.ep-drive-top{
    display:flex; align-items:center; gap:8px;
}
.ep-drive-title{
    font-weight:800; font-size:15px; color:#111827; letter-spacing:-.2px;
    max-width: calc(100% - 96px);
    white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.ep-drive-route-btn{
    margin-left:auto;
    background: var(--ink);
    color:#fff; border:1px solid var(--ink);
    padding:8px 12px; border-radius:12px;
    font-weight:700; font-size:13px; cursor:pointer;
    box-shadow:0 4px 12px rgba(0,0,0,.12);
}
.ep-drive-route-btn:hover { filter:brightness(1.05); }

.ep-drive-badges{
    display:flex; align-items:center; gap:6px;
    margin-top:8px; flex-wrap:wrap;
}
.badge{
    display:inline-flex; align-items:center; gap:4px;
    padding:4px 8px; border-radius:999px; font-size:12px; font-weight:700;
    border:1px solid #e5e7eb; background:#f9fafb; color:#374151;
}
.badge.blue{ background:#e9f2ff; border-color:#d7e6ff; color:#2563eb; }
.badge.green{ background:#e7f7ee; border-color:#c9f0da; color:#047857; }
.badge.amber{ background:#fff3d6; border-color:#ffe7ad; color:#b45309; }
.badge.red{ background:#ffe3e3; border-color:#ffc7c7; color:#b91c1c; }
.badge.gray{ background:#f3f4f6; border-color:#e5e7eb; color:#6b7280; }
.badge.outline{ background:#fff; }

.ep-drive-stats{
    display:grid; grid-template-columns: repeat(3, 1fr);
    gap:8px; margin-top:10px;
}
.ep-stat{
    background:#f8fafc; border:1px solid #eef2f7; border-radius:12px;
    padding:8px; text-align:center;
}
.ep-stat span{ display:block; font-size:11px; color:#6b7280; }
.ep-stat b{ display:block; font-size:15px; font-weight:800; color:#111827; }

.ep-meter{
    position:relative; height:10px; border-radius:999px; overflow:hidden;
    background:#eef2f7; border:1px solid #e5e7eb; margin-top:10px;
}
.ep-meter .fill{ height:100%; width:0; transition:width .25s ease; }
.ep-meter.green .fill{ background:#22c55e; }
.ep-meter.amber .fill{ background:#f59e0b; }
.ep-meter.red .fill{ background:#ef4444; }
.ep-meter.gray .fill{ background:#9ca3af; }
.ep-meter .cap{
    position:absolute; right:8px; top:-18px;
    font-size:11px; color:#6b7280;
}

.ep-drive-meta{
    display:grid; grid-template-columns: 80px 1fr; gap:8px 10px;
    margin-top:10px; font-size:12px; color:#374151;
}
.ep-drive-meta span{ color:#6b7280; }

.modal-backdrop {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.5); /* 어두운 배경 */
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.modal-content {
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    width: 50vw;     /* 화면 가로의 50% */
    height: 50vh;    /* 화면 세로의 50% */
    box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    display: flex;
    flex-direction: column;
}

.modal-content h2 {
    margin: 0 0 10px;
    font-size: 18px;
    text-align: center;
}

.modal-content > div {
    flex: 1; /* ParkingChart가 차지하는 영역 */
}

.modal-close {
    align-self: flex-end;
    margin-top: 10px;
    padding: 6px 12px;
    background: #3897f0;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}
.modal-close:hover {
    background: #2563eb;
}
/* ===== UI polish v1 (append at end of Main.css) ===== */

/* 1) 디자인 토큰 */
:root{
    --ease-out: cubic-bezier(.16,1,.3,1);
    --ease: cubic-bezier(.2,.7,.2,1);
    --dur-1: 120ms;
    --dur-2: 200ms;
    --dur-3: 320ms;

    --radius: 14px;
    --shadow-1: 0 1px 3px rgba(0,0,0,.06);
    --shadow-2: 0 6px 18px rgba(0,0,0,.12);
    --shadow-3: 0 12px 28px rgba(0,0,0,.18);
}

/* 2) 인터랙션 기본: 버튼/링크/탭 공통 트랜지션 */
button, .link-btn, .tab, .small-btn, .swap-btn,
.primary-btn, .primary-btn-center, .ghost-btn,
.ep-overlay__btn, .ep-drive-route-btn {
    transition:
            background-color var(--dur-2) var(--ease-out),
            border-color var(--dur-2) var(--ease-out),
            color var(--dur-2) var(--ease-out),
            box-shadow var(--dur-2) var(--ease-out),
            transform var(--dur-1) var(--ease-out),
            opacity var(--dur-1) var(--ease-out),
            filter var(--dur-1) var(--ease-out);
    will-change: transform, box-shadow, background-color;
}

/* 3) 포커스 접근성(키보드) */
button:focus-visible, .link-btn:focus-visible, .tab:focus-visible,
.ep-overlay__btn:focus-visible, .ep-drive-route-btn:focus-visible,
.primary-btn:focus-visible, .primary-btn-center:focus-visible, .ghost-btn:focus-visible {
    outline: none;
    box-shadow:
            0 0 0 3px color-mix(in srgb, var(--ink), transparent 70%),
            0 0 0 1px var(--ink) inset;
}

/* 4) Primary 버튼 (hover 시 “배경만” 더 투명하게) */
.primary-btn, .primary-btn-center{
    border-radius: var(--radius);
    box-shadow: 0 4px 12px rgba(0,0,0,.15);
    transform: translateY(0);
}
.primary-btn:hover, .primary-btn-center:hover{
    /* Fallback(구형 브라우저): 살짝 밝게 */
    filter: brightness(1.03);
    /* 신형(지원 브라우저): 배경 투명도 부여 */
    background: color-mix(in srgb, var(--ink), transparent 12%);
    border-color: color-mix(in srgb, var(--ink), transparent 12%);
    box-shadow: 0 8px 20px rgba(0,0,0,.18);
    transform: translateY(-1px);
}
.primary-btn:active, .primary-btn-center:active{
    transform: translateY(0);
    box-shadow: 0 3px 10px rgba(0,0,0,.12);
    filter: brightness(.98);
}
.primary-btn:disabled, .primary-btn-center:disabled{
    opacity: .55; cursor: not-allowed; box-shadow: none; transform:none;
}

/* 5) Ghost / Swap / Small 버튼들 */
.ghost-btn{
    background: var(--soft);
}
.ghost-btn:hover{
    background: color-mix(in srgb, var(--soft), transparent 30%); /* 배경만 투명해 보이는 느낌 */
    border-color: #e3e6ea;
}
.swap-btn:hover, .small-btn:hover{
    background: #fff;
    border-color: #e1e5ea;
    box-shadow: var(--shadow-1);
    transform: translateY(-1px);
}
.swap-btn:active, .small-btn:active{ transform: translateY(0); }

/* 6) 상단 링크 버튼(관리자/로그인/모바일) – 유리효과 + 호버 */
.header-links{ gap: 10px; }
.link-btn{
    backdrop-filter: blur(8px);
    background: rgba(255,255,255,.92);
    border-color: #e3e5ea;
    box-shadow: 0 2px 10px rgba(0,0,0,.08);
}
.link-btn:hover{
    background: rgba(255,255,255,.82);
    transform: translateY(-1px);
    box-shadow: 0 6px 18px rgba(0,0,0,.12);
}
.link-btn:active{ transform: translateY(0); }

/* 7) 탭 – 호버/액티브 미세 인터랙션 */
.tab{
    border-radius: 12px;
}
.tab:hover{
    background: color-mix(in srgb, var(--soft), white 30%);
    border-color: #e6e8ec;
    transform: translateY(-1px);
}
.tab.active{
    transform: translateY(-1px);
    box-shadow: 0 6px 16px rgba(0,0,0,.12);
}

/* 8) 카드/리스트 – 살짝 떠오르는 효과 */
.card, .list, .stat-card, .ep-drive-card{
    transition: box-shadow var(--dur-2) var(--ease-out), transform var(--dur-1) var(--ease-out), border-color var(--dur-2) var(--ease-out);
}
.card:hover, .stat-card:hover{
    box-shadow: var(--shadow-2);
    transform: translateY(-2px);
}
.list:hover{ box-shadow: var(--shadow-2); }

/* 9) 주행 카드 강화 */
.ep-drive-card{
    border:1px solid #e8eaf0;
    box-shadow: var(--shadow-1);
}
.ep-drive-card:hover{
    transform: translateY(-2px);
    box-shadow: var(--shadow-2);
    border-color:#dde3ee;
}
.ep-drive-route-btn{
    transition: all var(--dur-2) var(--ease-out);
}
.ep-drive-route-btn:hover{
    background: color-mix(in srgb, var(--ink), transparent 12%);
    border-color: color-mix(in srgb, var(--ink), transparent 12%);
    transform: translateY(-1px);
}
.ep-drive-route-btn:active{ transform: translateY(0); }

/* 10) 게이지(남은자리) – 부드러운 변화 */
.ep-meter .fill{ transition: width .25s var(--ease-out); }

/* 11) 오버레이(마커 상세) – 등장 애니메이션 & 버튼 호버 */
@keyframes ep-pop {
    from { opacity: 0; transform: translateY(6px) scale(.98); }
    to   { opacity: 1; transform: translateY(0)   scale(1); }
}
.ep-overlay{
    animation: ep-pop .18s var(--ease-out);
    border: 1px solid #e8eaf0;
    box-shadow: var(--shadow-3);
}
.ep-overlay__btn{
    background: var(--ink);
    border: 1px solid var(--ink);
}
.ep-overlay__btn:hover{
    background: color-mix(in srgb, var(--ink), transparent 12%);
    border-color: color-mix(in srgb, var(--ink), transparent 12%);
    transform: translateY(-1px);
}
.ep-overlay__btn:active{ transform: translateY(0); }

/* 12) 모달 – 입장/퇴장 느낌 */
.modal-content{
    animation: ep-pop .22s var(--ease-out);
    border: 1px solid #e8eaf0;
}
.modal-close{
    transition: all var(--dur-2) var(--ease-out);
}
.modal-close:hover{
    filter: brightness(1.03);
    transform: translateY(-1px);
}
.modal-close:active{ transform: translateY(0); }

/* 13) 브랜드 타이포도 살짝 정리(두께는 400 유지) */
.sidebar .brand-row .brand{
    font-weight: 400;
    line-height: 1;
    letter-spacing: -.2px;
    text-rendering: optimizeLegibility;
}

/* 14) 모션 최소화 환경 고려 */
@media (prefers-reduced-motion: reduce){
    * { animation: none !important; transition: none !important; }
}

/* ---- Fix: active 탭은 hover 때도 잉크색 유지 ---- */
.tabs .tab:not(.active):hover{
    background: color-mix(in srgb, var(--soft), white 30%);
    border-color: #e6e8ec;
    transform: translateY(-1px);
}

.tabs .tab.active,
.tabs .tab.active:hover,
.tabs .tab.active:focus-visible{
    background: var(--ink);
    color: #fff;
    border-color: var(--ink);
    box-shadow: 0 6px 16px rgba(0,0,0,.12);
    transform: translateY(-1px);
}